jQuery.fn.confirm=function(A){A=jQuery.extend({msg:"Are you sure?",stopAfter:"never",wrapper:"<span></span>",eventType:"click",dialogShow:"show",dialogSpeed:"",timeout:0},A);A.stopAfter=A.stopAfter.toLowerCase();if(!A.stopAfter in ["never","once","ok","cancel"]){A.stopAfter="never"}A.buttons=jQuery.extend({ok:"Yes",cancel:"No",wrapper:'<a href="#"></a>',separator:"/"},A.buttons);var B=A.eventType;return this.each(function(){var H=this;var D=jQuery(H);var J;var C=function(){var L=jQuery.data(H,"events");if(!L){return }H._handlers=new Array();for(var K in L[B]){H._handlers.push(L[B][K])}};var E=jQuery(A.buttons.wrapper).append(A.buttons.ok).click(function(){if(A.timeout!=0){clearTimeout(J)}D.unbind(B,F);D.show();G.hide();for(i in H._handlers){D.click(H._handlers[i])}D.click();if(A.stopAfter!="ok"&&A.stopAfter!="once"){D.unbind(B);D.one(B,F)}return false});var I=jQuery(A.buttons.wrapper).append(A.buttons.cancel).click(function(){if(A.timeout!=0){clearTimeout(J)}if(A.stopAfter!="cancel"&&A.stopAfter!="once"){D.one(B,F)}D.show();G.hide();return false});if(A.buttons.cls){E.addClass(A.buttons.cls);I.addClass(A.buttons.cls)}var G=jQuery(A.wrapper).append(A.msg).append(E).append(A.buttons.separator).append(I);var F=function(){jQuery(this).hide();if(A.dialogShow!="show"){G.hide()}G.insertBefore(this);G[A.dialogShow](A.dialogSpeed);if(A.timeout!=0){clearTimeout(J);J=setTimeout(function(){I.click();D.one(B,F)},A.timeout)}return false};C();D.unbind(B);H._confirm=F;H._confirmEvent=B;D.one(B,F)})};